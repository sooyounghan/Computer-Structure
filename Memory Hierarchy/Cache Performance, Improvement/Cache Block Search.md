-----
### 캐시에서 블록 찾기
-----
1. 집합 연관 방식 캐시에서 블록을 찾는 방법
   - 직접 사상 캐시에서와 같이 집합 연관 캐시 내 블록들은 블록 주소들을 나타내는 주소 태그를 가지고 있음
   - 선택된 집합 내 모든 블록 태그는 프로세서가 보낸 주소의 태그와 일치하는지 검사하게 됨
   - 주소가 나눠지는 그림
<div align="center">
<img src="https://github.com/user-attachments/assets/51119b9c-2821-428e-a5d1-510705653621">
</div>

   - 인덱스 값을 이용하여 원하는 주소가 속한 집합을 선정하고, 선정된 집합 내 모든 블록 태그를 병렬로 검색
   - 속도가 매우 중요하므로 선정된 집합 내 모든 태그를 병렬로 검색
   - 하지만, 순차적으로 검색하면 집합 연관 캐시의 적중 시간이 느려질 것

2. 전체 크기가 같다면, 연관 정도를 늘리는 것은 집합 내 블록 수를 증가시킴
   - 집합 내 블록의 수는 병렬 검색을 위해 필요한 동시 비교 횟수와 같음
   - 연관 정도를 2배 증가시키면 집합 당 블록의 수가 2배가 되고, 집합의 수는 절반이 됨
   - 따라서 연관 정도를 2배 늘릴 때마다 인덱스의 크기는 1비트 줄어들고, 태그의 크기는 1비트 늘어남
   - 완전 연관 캐시의 경우, 단 1개 밖에 없는 것과 같으므로 캐시 내 모든 블록들을 병렬로 검사해야 함
     + 따라서 인덱스는 없고, 블록 변위를 제오히ㅏㄴ 주소 전체가 태그가 되어 모든 블록의 태그와 비교되어야 함
     + 즉, 인덱스를 사용하지 않고 전체 캐시를 검색해야 함

3. 직접 사상 캐시에서는 엔트리가 들어갈 수 있는 블록이 하나밖에 없으므로 인덱스만 사용하여 캐시에 접그하므로 비교기가 하나만 있으면 됨
   - 4-way 집합 연과 캐시에서는 선정된 집합 4개 원소 중 하나를 선택하는 4:1 멀티플렉서와 4개가 비교기가 필요
<div align="center">
<img src="https://github.com/user-attachments/assets/a94184f4-015c-4c52-ab59-a054e10f40e7">
</div>

   - 캐시 접근은 집합을 찾는 일과 집합 내 태그를 검색하는 일로 구성
   - 집합 연관 캐시를 사용하려면 추가로 비교기의 비용과 집합의 원소들을 비교하고 선택하는 데 걸리는 시간 지연을 감수해야 함

4. 메모리 계층구조에서 직접 사상, 집합 연관, 완전 연관 사상 중 하나를 선택할 때는 실패 비용 대비 연관 구현 비용을 시간과 추가 하드웨어 측면에서 고려해야 함
5. CAM(Content Addressable Memory)은 비교와 저장을 한 장치에서 할 수 있도록 한 회로
   - RAM처럼 주소를 주고 워드를 읽는 것과 달리 데이터를 주면 CAM은 그것과 같은 값을 가지고 있는지 확인한 후 일치하는 행의 인덱스를 찾아줌
   - CAM은 캐시 설계자가 SRAM과 비교기를 사용하여 구현하는 것보다 더 높은 집합 연관도의 캐시를 구현할 수 있도록 해줌
   - CAM의 크기와 전력 소모 문제로 2020년 현재 2-way나 4-way 집합 연관 캐시는 표준 SRAM을 만들고, 8-way 이상은 CAM으로 만듬
