-----
### 유한상태기
-----
1. 단일 사이클 데이터패스를 위한 제어 유닛을 설계할 때, 각 명령어 종류의 제어 신호 값을 지정하는 진리표를 사용
2. 하지만 캐시의 경우는 동작이 여러 단계로 이루어질 수 있기 때문에 제어가 더 복잡
   - 캐시 제어는 각 단계에서 설정해야 하는 신호와 그 다음 단계 두 가지를 다 지정해야 함
3. 가장 많이 쓰이는 다단계 제어 방법은 유한상태기에 기반을 두고 있는데, 유한상태기는 대개 그래프로 표현 (유한상태기 : 입력과 출력의 집합 / 다음 상태 함수 / 출력 함수로 구성된 순차 논리 함수, 다음 상태 함수는 현재 상태와 입력을 새로운 상태로 사상하며, 출력 함수는 현재 상태(와 입력)를 출력에 사상)
   - 유한상태기는 상태의 집합과 상태 변환에 대한 지침으로 구성되며, 상태 변환 지침은 다음 상태 함수(Next-State Function, 주어진 입력과 현재 상태에 대한 유한 상태기의 다음 상태를 결정하는 조합 논리 함수)에 의해 정의되며, 현재 상태와 입력을 새로운 상태로 사상
   - 제어를 위해 유한 상태기를 사용할 때, 각 상태는 기계가 그 상태에 있을 때 인가되는(Asserted) 출력들도 명시
   - 유한상태기의 구현에서는 통상 인가된다고 명시하지 않은 출력은 모두 비인가된다고(Deasserted) 가정
   - 마찬가지로 인가된다고 명시하지 않은 신호는 Don't Care가 아니라 비인가로 작동해야 데이터패스가 올바르게 동작

4. 멀티플렉서 제어는 약간 다름
   - 멀티플렉서 제어가 0이냐 1이냐에 따라 입력 중 하나가 선택됨
   - 따라서 유한 상태기에서는 모든 멀티플렉서 제어의 값을 항상 명시해야 함
   - 유한상태기를 논리회로로 구현할 때 제어를 0으로 설정하는 것이 기본이며, 따라서 게이트를 필요로 하지 않음

5. 유한상태기는 인가할 데이터패스 신호와 다음 상태를 결정하는 조합 논리 블록과 현재 상태를 저장하고 있는 임시 레지스터로 구현될 수 있음
<div align="center">
<img src="https://github.com/user-attachments/assets/ab13dc1d-9622-45ec-a8d1-4afdd2165453">
</div>

6. 이 단순한 설계는 블로킹(Blocking) 캐시라고 하는데, 캐시가 요청을 마칠 때까지 프로세서가 기다려야 함
7. 위 유한상태기 유형은 Edward Moore의 이름을 따서 Moore 기계라 불림
   - 이것을 구별하는 특징은 출력이 현재 상태에 의해서만 결정되는 것
   - Moore 기계의 경우 조합제어 논리(Combinational Control Logic)라고 표시된 사각형을 두 부분으로 나눌 수 있음
     + 한 부분은 제어 출력과 상태 입력을 가지고 있으며, 다른 부분은 다음 상태 출력만을 가지고 있음
   - 다른 유형의 유한상태기는 Mealy 기계인데, Georage Mealy의 이름을 따서 붙인 것 : 입력과 현재 상태 두 가지를 다 사용하여 출력을 결정
   - Moore 기계는 제어 유닛의 속도와 크기에서 잠재적인 장점이 있는데, 제어 출력은 클럭 사이클 초기에 필요한데, 그 값이 입력과는 상관없이 현재 상태에 의해서만 결정되므로 속도에 이점이 생김
   - Moore 기계의 잠재적인 단점은 상태가 추가로 필요할 수 있다는 점 : 예를 들면 2개의 상태 시퀀스 사이에 한 상태만큼 차이가 있을 때 Mealy 기계는 입력에 의해서 출력이 결정되게 함으로써 상태를 합칠 수 있음
