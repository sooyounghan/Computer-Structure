-----
### 캐시 실패의 처리
-----
1. 제어 유닛이 캐시 실패(데이터가 캐시에 없어서 충족시킬 수 없는 캐시 데이터 요청)를 처리하는 과정
   - 제어 유닛은 실패를 탐지해야 하며, 메모리(또는 하위 수준 캐시)로부터 데이터를 가져와서 실패를 처리해야 함
   - 만약 캐시 내 원하는 데이터가 존재하면 컴퓨터는 아무 일도 없는 것처럼 데이터 사용 가능

2. 캐시 적중을 처리할 수 있게 프로세서의 제어 유닛을 수정하는 것은 쉬운 일이지만, 실패의 경우 몇 가지 작업이 더 필요
   - 캐시 실패 처리는 프로세서의 제어 유닛과 별도 제어기의 공동 작업으로 처리
   - 이 제어기는 메모리 접근을 시작하고 캐시를 채우는 일을 함
   - 캐시 실패의 처리는 모든 레지스터의 상태를 저장하는 인터럽트와 달리 파이프라인 지연만을 발생시킴
   - 캐시 발생 시에는 임시 레지스터와 프로그래머에게 보이는 레지스터 내용을 그대로 유지한 채 메모리에서 데이터가 오기를 기다리면서 전체 시스템을 지연시킴
   - 더 정교한 비순서 실행 프로세서는 캐시 실패 처리를 기다리면서 명령어를 실행시킬 수 있음

3. 명령어 실패 처리 과정
   - 명령어 접근에 실패하면 명령어 레지스터(단일 사이클 구현에서는 명령어 레지스터를 사용하지 않음)의 내용은 유효하지 않게 됨
   - 적합한 명령어를 캐시로 가져오려면 더 하위 계층의 메모리에게 읽기를 시킬 수 있어야 함
   - PC는 맨 처음 클럭 사이클 동안에 증가되므로, 명령어 캐시 실패를 발생시킨 명령어의 주소는 현재의 PC에서 4를 뺀 값과 같음 (멀티사이클 구현에 해당, 단일 사이클 구현에서는 아직 PC가 증가되지 않았으므로 PC에서 4를 뺄 필요가 없으며, 파이프라인 구현에서는 파이프라인 레지스터에 증가된 PC 값만 있으므로 멀티사이클처럼 4를 빼야 함)
   - 주소를 구했으면, 메인 메모리에서 일긱를 수행하도록 요구해야 함 : 메모리가 응답하기를 기다려서(접근에 여러 클럭이 걸림), 읽어 온 워드들을 캐시에 씀

4. 명령어 캐시 실패 처리 단계
   - 원래의 PC 값(즉, 현재 PC 값 - 4)(단일 사이클 구현에서는 현재 PC 값)을 메모리에 보냄
   - 메인 메모리에 읽기 동작을 지시하고 메모리가 접근을 끝낼 때까지 기다림
   - 캐시 엔트리에 쓰며, 이 때, 메모리에서 인출한 데이터를 데이터 부분에 쓰고, 태그 필드에 주소의 상위 비트를 쓰고, 유효 비트를 1로 함
   - 명령어 수행을 첫 단계부터 다시 시작하며, 캐시에서 명령어를 다시 인출하는데, 이번에는 필요한 명령어를 캐시에서 찾을 수 있음

5. 데이터 접근을 위한 캐시 제어도 기본적으로 같아서, 실패가 발생하면 메모리가 데이터를 보내줄 때까지 프로세서를 지연시킴
