-----
### 캐시의 기본
-----
1. 캐시(Cache) : 최초로 장착한 상용 컴퓨터에서 메인 메모리와 프로세서 사이의 메모리 계층을 나타내기 위해 사용
   - 오늘날 캐시라는 단어를 이런 용도로 가장 많이 사용하지만, 접근의 지역성을 이용해 관리되는 모든 기억장치를 부르는 데도 사용
   - 1960년대 초반 연구용 컴퓨터에서 처음 등장하였고, 오늘날에는 서버에서 저전력 임베디드 프로세서에 이르기까지 모든 범용 컴퓨터가 캐시를 갖고 있음

2. 캐시에 없는 데이터를 요청하기 전과 후의 캐시 상태
<div align="center">
<img src="https://github.com/user-attachments/assets/6cdf46af-8915-4d13-964b-2ca2d4b2aba2">
</div>

   - 요청하기 전 캐시에는 최근에 접근한 $X_{1}, X_{2}, ..., X_{n - 1}$이 존재하고, 프로세서는 캐시에 없는 $X_{n}$을 요청
   - 이 요청은 실패를 발생시키고 워드 $X_{n}$을 메모리에서 캐시로 가져오게 됨
   - 각 워드가 캐시 내의 딱 한 장소에만 있을 수 있다면, 워드가 캐시 내에 있는지 없는지를 바로 알 수 있음
     + 각 메모리 워드에 캐시 내 위치를 할당하는 가장 간단한 방법은 그 워드의 메모리 주소를 이용하는 것 : 이러한 캐시 구조를 직접 사상(Direct Mapped, 각 메모리의 위치가 캐시 내 정확히 한 곳에서만 사상되는 캐시 구조)이라 함
   - 직접 사상 캐시가 메모리 주소를 캐시 위치로 바꾸는 방법 : 예를 들어, 거의 모든 직접 사상 캐시는 다음 사상 방식으로 캐시 블록을 찾음
<div align="center">
<img src="https://github.com/user-attachments/assets/fb16e77f-c2d7-438b-9c6a-5f315de46a8b">
</div>

   - 캐시 내 블록 수가 2의 거듭제곱이면, 주소의 하위 $log_{2}$(캐시 내 전체 블록 수) 비트를 취하는 것만으로도 간단히 modulo 연산을 할 수 있음
   - 따라서 8블록 캐시는 블록 주소의 하위 3비트(8 = $2^{3}$)를 사용
   - 예를 들어, 8워드로  구성된 직접 사상 캐시에서 1($00001_{2})과 29($11101_{2}$) 사이의 메모리 주소 중 캐시 블록 1($001_{2}$)과 5($101_{2})으로 사상되는 것들을 보여줌
<div align="center">
<img src="https://github.com/user-attachments/assets/17493867-90c9-4eed-b7c3-8cac745f13dd">
</div>

3. 각 캐시 엔트리는 여러 주소의 메모리 내용을 갖고 있을 수 있음
   - 캐시에 태그(Tag)를 추가하여 요구하는 워드가 캐시 내에 있는지, 없는지, 즉, 캐시 내 데이터가 프로세서가 요구하는 것인지 아닌지 알 수 있음
   - 태그는 캐시 인덱스로 사용되지 않은 주소의 상위 부분 비트들로 구성
   - 위 그림에서 5비트 주소 중 하위 3비트 인덱스 필드가 블록을 선택하는 데 사용되었으므로 상위 2비트가 태그가 됨
   - 태그에는 인덱스 비트가 포함되지 않는데, 인덱스 비트는 그 블록 번호가 같기 떄문에 중복해서 나타낼 필요가 없음

4. 또한 캐시 블록이 유효한 정보를 갖고 있는지 알아내는 방법이 필요
   - 예를 들어, 컴퓨터를 처음 켜서 프로세서가 작업을 시작할 떄, 캐시는 비어 있을 것으며, 따라서 태그 필드는 아무 의미가 없을 것
   - 많은 명령어를 수행한 이후에도 일부 캐시 엔트리는 비어 있을 수 있음
   - 따라서, 이들 엔트리의 태그들은 무시되어야 하는데, 이 때 가장 많이 쓰이는 방법은 캐시 엔트리에 유효 비트(Valid Bit)를 추가해서 엔트리에 유효한 주소가 있는지 표시하는 것
   - 이 비트가 0이면 이 엔트리에는 유효한 블록이 없는 것으로 간주

5. 일반적으로 읽기는 캐시의 내용을 변화시키지 않으므로 읽기 처리는 쓰기 처리보다 간단함
6. 캐시는 예측 기법을 사용하는 가장 중요한 예로, 지역성의 원칙을 이용해서 메모리 상위 계층에서 필요한 데이터를 찾음
   - 상위 계층의 에측이 틀렸을 경우에는 하위 계층에서 적합한 데이터를 찾을 수 있는 방법을 제공
   - 현대 컴퓨터의 캐시 예측 적중률은 대개 95% 이상
