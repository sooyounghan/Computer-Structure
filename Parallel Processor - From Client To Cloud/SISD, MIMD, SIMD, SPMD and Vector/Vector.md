-----
### 벡터
-----
1. 벡터 구조는 ALU를 파이프라인으로 구성하여서 낮은 비용으로 좋은 성능을 얻음
2. 벡터 구조의 기본 원리는 메모리에서 데이터 원소들을 꺼내서 큰 레지스터 집합에 넣은 다음, 레지스터에 있는 데이터에 대해 파이프라인 실행 유닛을 사용하여 순차적으로 연산하고 그 결과를 다시 메모리에 저장하는 것
3. 벡터 구조의 핵심적인 특징은 벡터 레지스터 집합 (예를 들어, 64비트 원소 64개를 저장할 수 있는 벡터 레지스터 32개를 가질 수 있음)
4. 예) 벡터 코드와 일반 코드의 비교
   - MIPS 명령어 집합 구조에서 벡터 명령어와 벡터 레지스터를 추가한다고 가정
     + 벡터 연산은 MIPS 연산과 같은 이름을 사용하되 끝에 v자를 덧붙임 (예) addv.d는 2배 정밀도 벡터 2개를 더하는 명령어)
     + 벡터 명령어의 입력은 벡터 레지스터 2개가 될 수 있고(addv.d), 벡터 레지스터 하나와 스칼라 레지스터 하나가 될 수 있음(addvs.d)
     + 후자의 경우 스칼라 레지스터 값은 모든 연산에 다 사용
     + lv, sv는 load vector, store vector의 약자로 2배 정밀도 벡터 데이터 전체를 적재하거나 저장하는 명령어
     + 한 피연산자는 적재될 혹은 저장할 벡터 레지스터이고, 다른 피연산자는 MIPS의 범용 레지스터로서 벡터가 저장된(또는 저장될) 메모리의 시작 주소를 가지고 있음
   - 다음 연산에 해당하는 일반적인 MIPS 코드와 벡터 MIPS 코드
<div align="center">
<img src="https://github.com/user-attachments/assets/ddbebef5-0d9b-4ac2-892e-365e891ca54a">
</div>

   - 여기에서 a는 2배 정밀도 스칼라 변수이고, X와 Y는 64개의 2배 정밀도 부동 소수점 숫자의 벡터로서 메모리에 있음
   - X와 Y의 시작 주소가 $s0와 $s1에 있다고 가정

   - DAXPY의 일반(순환적인) MIPS 코드
<div align="center">
<img src="https://github.com/user-attachments/assets/6990a078-a73d-4e09-a17f-9b4c1c481735">
</div>

   - DAXPY의 벡터 MIPS 코드
<div align="center">
<img src="https://github.com/user-attachments/assets/f89bdf22-3b45-434a-abe1-91dbdf9ee066">
</div>

5. 벡터 프로세서가 동적 명령어 대역폭을 획기적으로 줄임
   - MIPS에서 거의 600개에 달하던 명령어를 6개로 크게 줄임 : 벡터 연산 하나가 64개의 원소를 처리하기 때문이며, MIPS에서 거의 반 정도 차지하던 오버헤드 명령어들이 벡터 코드에는 하나도 없기 때문임
   - 즉, 인출되는 명령어가 적어지면 에너지 소모도 줄어듬

6. 파이프라인 해저드의 빈도
   - 일반 MIPS 코드에서 add.d 명령어는 mul.d 명령어가 끝날 때까지 매번 기다려야하고, s.d는 add.d 명령어가 끝날 때까지 매번 기다려야 하며, add.d 명령어와 mul.d 명령어는 l.d 명령어를 기다려야 함
   - 벡터 프로세서에서 벡터 명령어들은 각 벡터의 첫 번째 원소에 대해서만 지연되고, 나머지 원소들은 파이프라인을 따라서 거침없이 흘러갈 수 있음
   - 따라서, 매 원소 연산마다 파이프라인이 지연되는 대신에 벡터 연산 하나당 한 번 씩만 지연됨
   - 위 예에제에서 MIPS의 파이프라인 지연 발생 빈도는 벡터 버전의 MIPS보다 64배 높음
   - MIPS 파이프라인 지연은 순환문 펼치기 사용해 줄일 수 있지만, 명령어의 대역폭 차이는 줄일 수 없음

7. 순환문의 반복 횟수가 벡터 길이보다 짧을 떄 벡터 구조는 벡터 연산의 크기를 축소시키는 레지스터를 사용
   - 반대로 반복 횟수가 더 크면, 벡터 연산을 반복시키고 반복으로 처리하고 남은 나머지를 계산하기 위한 관리 코드를 추가 : 이 과정을 스트립 마이닝(Strip Mining)
   
